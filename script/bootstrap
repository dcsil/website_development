#!/bin/sh

# Exit if any subcommand fails
set -e

DIR=$PWD

RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[0;33m']
CLEAR_LINE='\r\033[K'

# pwd
echo "${RED}==> Installing nodejs =============================================="
curl "https://nodejs.org/dist/latest/node-${VERSION:-$(wget -qO- https://nodejs.org/dist/latest/ | sed -nE 's|.*>node-(.*)\.pkg</a>.*|\1|p')}.pkg" > "$HOME/Downloads/node-latest.pkg" && sudo installer -store -pkg "$HOME/Downloads/node-latest.pkg" -target "/"

echo "${CLEAR_LINE}==> Installing Python3.10 via Homebrew ======================"
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
brew install python3.10

# pwd
echo "${GREEN}==> Installing client npm dependencies ==========================="
npm install

# pwd
echo "${YELLOW}==> Installing server python dependencies ======================="
#python3 -m venv myvenv
#. myvenv/bin/activate
pip3 install -r requirements.txt
